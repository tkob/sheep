# Design memo

## Call graph

```
+-----+      +------+
| shp |----->| shpc |
+-----+      +------+
   |
   |         +----------+
   +-------->| shpfront |
   |         +----------+
   |
   |         +---------------+
   +-------->| compiled code |
             +---------------+
```

## Data Flow

### Compilation

```
/--------------\   +------+   /------------\
| Sheep script |-->| shpc |-->| Tcl script |
\--------------/   +------+   \------------/
```

### Runtime

```
/------------\   +----------+   /-------------\   +-------------------+
| Input data |-->| shpfront |-->| MessagePack |-->| shp/compiled code |
\------------/   +----------+   \-------------/   +-------------------+
                                                            |
                                                            v
                                                     /-------------\
                                                     | Output data |
                                                     \-------------/
```
