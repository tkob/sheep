# Design memo

## Call graph

```
+-----+   +------------+   +------+
| shp |-->| shprun.tcl |-->| shpc |
+-----+   +------------+   +------+
                 |
                 |         +----------+
                 +-------->| shpfront |
                 |         +----------+
                 |
                 |         +---------------+
                 +-------->| compiled code |
                           +---------------+
```

## Data Flow

### Compilation

```
/--------------\   +------+   /------------\
| Sheep script |-->| shpc |-->| Tcl script |
\--------------/   +------+   \------------/
```

### Runtime

```
/------------\   +----------+   /-------------\   +--------------------------+
| Input data |-->| shpfront |-->| MessagePack |-->| shprun.tcl/compiled code |
\------------/   +----------+   \-------------/   +--------------------------+
                                                              |
                                                              v
                                                      /-------------\
                                                      | Output data |
                                                      \-------------/
```
